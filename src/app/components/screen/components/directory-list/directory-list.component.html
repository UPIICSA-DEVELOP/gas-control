<!--
  ~ Copyright (C) MapLander S de R.L de C.V - All Rights Reserved
  ~ Unauthorized copying of this file, via any medium is strictly prohibited
  ~ Proprietary and confidential
  -->

<div id="directory-list">
  <mat-card class="card">

    <div class="head">
      <h3>COLABORADORES DE LA ESTACIÓN</h3>
    </div>
    <mat-form-field class="search" *ngIf="collaborators">
      <input matInput placeholder="Buscar" aria-label="Search input" (input)="search($event)">
      <mat-icon matSuffix class="icons">search</mat-icon>
    </mat-form-field>
    <div *ngIf="gasStation; then list else load"></div>
    <ng-template #list>
      <div *ngIf="collaborators; then card else empty"></div>
      <ng-template #card>
        <div *ngIf="collaborators.length!==0; then contact else notList"></div>
        <ng-template #contact>
          <mat-card-content>
            <div *ngFor="let collaborator of collaborators; let i = index">
              <mat-card class="collaborator" *ngIf="collaborator.id !== idSession">
                <mat-card-content>
                  <div class="image">
                    <img class="image-collaborator" *ngIf="collaborator.profileImage && collaborator.profileImage.thumbnail" [src]="collaborator.profileImage.thumbnail" alt="profile image">
                    <img class="image-collaborator" *ngIf="(!collaborator.profileImage || !collaborator.profileImage.thumbnail) && utils" [src]="utils.groupIcons[gasStation.type-1].fileCS.thumbnail" alt="profile image">
                    <mat-icon class="image-collaborator" *ngIf="(!collaborator.profileImage || !collaborator.profileImage.thumbnail) && !utils">add_photo_alternate</mat-icon>
                  </div>
                  <div class="information">
                    <div class="info"> {{collaborator.name}} {{collaborator.lastName}}</div>
                    <div class="info"> {{roleType[collaborator.role-1]}}</div>
                    <div class="info"> {{collaborator.email}}</div>
                    <div class="info"> {{collaborator.phoneNumber}}</div>
                  </div>
                </mat-card-content>
                <mat-divider></mat-divider>
                <div class="action-buttons">
                  <div class="button">
                    <button mat-button *ngIf="collaborator.role!==4 && user.role !==6" matTooltip="Eliminar" (click)="deleteCollaborator(collaborator.id, i, collaborator.role)">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                  <div class="button">
                    <button *ngIf="(user.role!==6 || user.role===7) && collaborator.role!==4" mat-button (click)="changeRoleCollaborator(collaborator)">
                      <mat-icon matTooltip="Cambiar rol" svgIcon="icons:change_role"></mat-icon>
                    </button>
                  </div>
                  <div class="button">
                    <a href="https://wa.me/{{collaborator.countryCode || '52'}}{{collaborator.phoneNumber}}" class="link" target="_blank">
                      <button matTooltip="Enviar WhatsApp" mat-button>
                        <mat-icon svgIcon="icons:whatsapp"></mat-icon>
                      </button>
                    </a>
                  </div>
                  <div class="button">
                    <a href="tel:+{{collaborator.countryCode || '52'}}{{collaborator.phoneNumber}}" class="link">
                      <button matTooltip="Marcar" mat-button>
                        <mat-icon>phone</mat-icon>
                      </button>
                    </a>
                  </div>
                </div>
              </mat-card>
            </div>
          </mat-card-content>
        </ng-template>
        <ng-template #notList>
          <div *ngIf="emptySearch; then textOne else textTwo"></div>
          <ng-template #textOne>
            <mat-card-content style="display: flex; justify-content: center; align-items: center; text-align: center;">
              <span>No hay coincidencias</span>
            </mat-card-content>
          </ng-template>
          <ng-template #textTwo>
            <mat-card-content style="display: flex; justify-content: center; align-items: center; text-align: center;">
              <span>Aún no tiene colaboradores asignados a esta Estación de Servicio</span>
            </mat-card-content>
          </ng-template>
        </ng-template>
      </ng-template>
      <ng-template #empty>
        <mat-card-content style="display: flex; justify-content: center; align-items: center; text-align: center;">
          <span>Aún no tiene colaboradores asignados a esta Estación de Servicio</span>
        </mat-card-content>
      </ng-template>
    </ng-template>
    <ng-template #load>
      <mat-card-content style="display: flex; justify-content: center; align-items: center">
        <mat-spinner></mat-spinner>
      </mat-card-content>
    </ng-template>


  </mat-card>
</div>
