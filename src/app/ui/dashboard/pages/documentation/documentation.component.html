<!--
  ~ Copyright (C) MapLander S de R.L de C.V - All Rights Reserved
  ~ Unauthorized copying of this file, via any medium is strictly prohibited
  ~ Proprietary and confidential
  -->

<div id="documentation">
  <mat-progress-bar [mode]="'indeterminate'" *ngIf="load" class="progress"></mat-progress-bar>
  <div class="background"></div>
  <div class="content">
    <div class="column-one">
      <div class="buttons">
        <div>
          <div class="documents">
            Documentación
          </div>
          <div class="add">
            Añadir documentación
          </div>
          <div class="buttons-container">
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 1}" [color]="'primary'" (click)="documentsActive=1">
              ASEA
            </button>
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 2}" [color]="'primary'" (click)="documentsActive=2">
              CRE
            </button>
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 3}" [color]="'primary'" (click)="documentsActive=3">
              PROTECCIÓN CIVIL
            </button>
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 4}" [color]="'primary'" (click)="documentsActive=4">
              STPS
            </button>
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 5}" [color]="'primary'" (click)="documentsActive=5">
              PROFECO
            </button>
            <button type="button" mat-button [ngClass]="{'btn-active':documentsActive === 6}" [color]="'primary'" (click)="documentsActive=6">
              OTRA
            </button>
          </div>
        </div>
        <p>Seleccione un archivo para cargar, actualizar o visualizar.</p>
      </div>
      <div class="description">
        <div class="paragraph">
          <p><span class="content">ASEA</span> Garantiza la seguridad de las personas y la integridad del medio ambiente
            con certidumbre jurídica, procedimental y de costos, con el objetivo de convertirse en la Agencia que lleve
            al sector de hidrocarburos de México a ser el más limpio y seguro del mundo</p>
        </div>
        <div class="paragraph">
          <p><span class="content">CRE</span> Es la entidad a cargo de regular de manera transparente imparcial y
            eficiente las industrias del gas, de los refinados, derivados de hidrocarburos y de electricidad</p>
        </div>
      </div>
    </div>
    <div class="column-two">
      <ng-container [ngSwitch]="documentsActive">

        <!-- ASEA -->
        <ng-container *ngSwitchCase="1">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              NOM-005-ASEA-2016
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of docsAsea; index as i;">
                <div *ngIf="doc.name.match('other'); else dividerBlock" class="others">Otros documentos ASEA</div>
                <ng-template #dividerBlock>
                  <div *ngIf="doc.name.match('spacer'); else fileBlock" class="divider"></div>
                </ng-template>
                <ng-template #fileBlock>
                  <mat-card class="file">
                    <div *ngIf="doc.docFile; else newFileBlock" class="text" (click)="openPdf2(doc.docFile.file)">
                      <div>{{doc.name}}</div>
                    </div>
                    <ng-template #newFileBlock>
                      <div class="text">
                        <div>{{doc.name}}</div>
                      </div>
                    </ng-template>
                    <div class="button-icon">
                      <lib-upload-file (loadImage)="uploadFile($event, i, 1, doc.type)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                        <ng-template #button>
                          <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                          <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                        </ng-template>
                      </lib-upload-file>
                    </div>
                  </mat-card>
                </ng-template>
              </ng-container>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- CRE -->
        <ng-container *ngSwitchCase="2">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              NOM-016-CRE-2016
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of docsCre; index as i;">
                <div *ngIf="doc.name.match('other'); else dividerBlock" class="others">Otros documentos CRE</div>
                <ng-template #dividerBlock>
                  <div *ngIf="doc.name.match('spacer'); else fileBlock" class="divider"></div>
                </ng-template>
                <ng-template #fileBlock>
                  <mat-card class="file">
                    <div *ngIf="doc.docFile; else newFileBlock" class="text" (click)="openPdf2(doc.docFile.file)">
                      <div>{{doc.name}}</div>
                    </div>
                    <ng-template #newFileBlock>
                      <div class="text">
                        <div>{{doc.name}}</div>
                      </div>
                    </ng-template>
                    <div class="button-icon">
                      <lib-upload-file (loadImage)="uploadFile($event, i, 2, doc.type)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                        <ng-template #button>
                          <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                          <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                        </ng-template>
                      </lib-upload-file>
                    </div>
                  </mat-card>
                </ng-template>
              </ng-container>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- PROTECCIÓN CIVIL -->
        <ng-container *ngSwitchCase="3">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              Protección Civil Estatal
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of docsProCiv; index as i;">
                <mat-card class="file">
                  <div *ngIf="doc.docFile; else newFileBlock" class="text" (click)="openPdf2(doc.docFile.file)">
                    <div>{{doc.name}}</div>
                  </div>
                  <ng-template #newFileBlock>
                    <div class="text">
                      <div>{{doc.name}}</div>
                    </div>
                  </ng-template>
                  <div class="button-icon">
                    <lib-upload-file (loadImage)="uploadFile($event, i, 3, doc.type)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                      <ng-template #button>
                        <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                        <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                      </ng-template>
                    </lib-upload-file>
                  </div>
                </mat-card>
              </ng-container>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- STPS -->
        <ng-container *ngSwitchCase="4">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              Secretaría del trabajo
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of docsStps; index as i;">
                <mat-card class="file">
                  <div *ngIf="doc.docFile; else newFileBlock" class="text" (click)="openPdf2(doc.docFile.file)">
                    <div>{{doc.name}}</div>
                  </div>
                  <ng-template #newFileBlock>
                    <div class="text">
                      <div>{{doc.name}}</div>
                    </div>
                  </ng-template>
                  <div class="button-icon">
                    <lib-upload-file (loadImage)="uploadFile($event, i, 4, doc.type)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                      <ng-template #button>
                        <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                        <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                      </ng-template>
                    </lib-upload-file>
                  </div>
                </mat-card>
              </ng-container>
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- PROFECO -->
        <ng-container *ngSwitchCase="5">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              Procuraduría Federal del Consumidor
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of docsProfeco; index as i;">
                <mat-card class="file">
                  <div *ngIf="doc.docFile; else newFileBlock" class="text" (click)="openPdf2(doc.docFile.file)">
                    <div>{{doc.name}}</div>
                  </div>
                  <ng-template #newFileBlock>
                    <div class="text">
                      <div>{{doc.name}}</div>
                    </div>
                  </ng-template>
                  <div class="button-icon">
                    <lib-upload-file (loadImage)="uploadFile($event, i, 5, doc.type, false)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                      <ng-template #button>
                        <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                        <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                      </ng-template>
                    </lib-upload-file>
                  </div>
                </mat-card>
              </ng-container>

              <div class="others">Pruebas físicas PROFECO</div>
              <ng-container *ngFor="let doc of otherDocsProfeco; index as i;">
                <mat-card class="file">
                  <div class="text prof">
                    <span class="title">{{otherDocsProfecoTitles[i]}}</span>
                    <div *ngIf="doc.docFile; else newFileBlock" class="desc" (click)="openPdf2(doc.docFile.file)">
                      <div>{{doc.name}}</div>
                    </div>
                    <ng-template #newFileBlock>
                      <div class="desc">
                        <div>{{doc.name}}</div>
                      </div>
                    </ng-template>
                  </div>
                  <div class="button-icon">
                    <lib-upload-file (loadImage)="uploadFile($event, i, 5, doc.type, true)" [content]="button" [fileType]="'document'" [isLoaded]="false">
                      <ng-template #button>
                        <mat-icon *ngIf="!doc.docFile; else uploadBlock" matTooltip="Cambiar" svgIcon="icons:upload"></mat-icon>
                        <ng-template #uploadBlock><mat-icon matTooltip="Cargar">autorenew</mat-icon></ng-template>
                      </ng-template>
                    </lib-upload-file>
                  </div>
                </mat-card>
              </ng-container>
<!--              <ng-container *ngFor="let doc of profecoDocuments">-->
<!--                <mat-card class="file">-->
<!--                  <div class="text">-->
<!--                    <div (click)="openOtherPdf(doc.fileCS.thumbnail)">{{doc.name}}</div>-->
<!--                  </div>-->
<!--                </mat-card>-->
<!--              </ng-container>-->
            </mat-card-content>
          </mat-card>
        </ng-container>

        <!-- OTHERS -->
        <ng-container *ngSwitchCase="6">
          <mat-card class="container">
            <mat-card-header style="font-weight: 600;">
              Otros (Mis documentos)
            </mat-card-header>
            <mat-card-content>
              <ng-container *ngFor="let doc of othersDocuments">
                <mat-card class="file">
                  <div class="text" (click)="openOtherPdf(doc.fileCS.thumbnail)">
                    <div>{{doc.name}}</div>
                  </div>
                  <div class="button-icon">
                    <lib-upload-file (loadImage)="updateOtherDocument($event, doc)" [content]="button" [fileType]="'document'" [isLoaded]="true">
                      <ng-template #button>
                        <mat-icon matTooltip="Cargar">autorenew</mat-icon>
                      </ng-template>
                    </lib-upload-file>
                  </div>
                </mat-card>
              </ng-container>
            </mat-card-content>
          </mat-card>
        </ng-container>
      </ng-container>
    </div>
  </div>
  <div class="btn-close">
    <button mat-icon-button matTooltip="Cerrar" aria-label="Close-button" (click)="closeDocumentation()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <ng-template [ngIf]="documentsActive === 6">
    <div class="btn-add-other">
      <lib-upload-file [content]="buttonAddDoc" [fab]="true" [fileType]="'document'" (loadImage)="loadNewOtherDocument($event)">
        <ng-template #buttonAddDoc>
          <button mat-fab="" color="primary" matTooltip="Añadir documento" aria-label="Add document">
            <mat-icon>add</mat-icon>
          </button>
        </ng-template>
      </lib-upload-file>
    </div>
  </ng-template>
</div>
