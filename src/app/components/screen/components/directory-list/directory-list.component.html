<!--
  ~ Copyright (C) MapLander S de R.L de C.V - All Rights Reserved
  ~ Unauthorized copying of this file, via any medium is strictly prohibited
  ~ Proprietary and confidential
  -->

<div id="directory-list">
  <mat-card class="card">

    <div class="head">
      <h3>COLABORADORES DE LA ESTACIÓN</h3>
    </div>
    <mat-form-field class="search" *ngIf="collaborators && collaborators.length!==0">
      <input matInput placeholder="Buscar" aria-label="Search input" (input)="search($event)">
      <mat-icon matPrefix class="icons">search</mat-icon>
    </mat-form-field>
    <div *ngIf="gasStation; then list else load"></div>
    <ng-template #list>
      <div *ngIf="collaborators; then card else empty"></div>
      <ng-template #card>
        <div *ngIf="collaborators.length!==0; then contact else notList"></div>
        <ng-template #contact>
          <mat-card-content>
            <div *ngFor="let collaborator of collaborators; let i = index">
              <mat-card class="collaborator" *ngIf="collaborator.id !== idSession">
                <mat-card-content>
                  <div class="image">
                    <img class="image-collaborator" *ngIf="collaborator.profileImage"
                         [src]="collaborator.profileImage.thumbnail" alt="profile image">
                    <img class="image-collaborator" *ngIf="!collaborator.profileImage && utils"
                         [src]="utils.groupIcons[gasStation.type-1].fileCS.thumbnail" alt="profile image">
                    <mat-icon class="image-collaborator" *ngIf="!collaborator.profileImage && !utils">account_circle</mat-icon>
                  </div>
                  <div class="information">
                    <div class="info"> {{collaborator.name}} {{collaborator.lastName}}</div>
                    <div class="info"> {{roleType[collaborator.role-1]}} | {{collaborator.jobTitle}}</div>
                    <div class="info"> {{collaborator.email}}</div>
                    <div class="info"> {{collaborator.phoneNumber}}</div>
                  </div>
                </mat-card-content>
                <mat-divider></mat-divider>
                <div class="action-buttons">
                  <div class="button">
                    <button mat-button matTooltip="Eliminar" (click)="deleteCollaborator(collaborator.id, i, collaborator.role)">
                      <mat-icon>delete</mat-icon>
                    </button>
                  </div>
                  <div class="button">
                    <button mat-button matTooltip="Cambiar rol" [disabled]="collaborator.role<=5" [mat-menu-trigger-for]="role">
                      <mat-icon svgIcon="icons:change_role"></mat-icon>
                    </button>
                    <mat-menu #role>
                      <button mat-menu-item *ngIf="collaborator.role !== 6" (click)="changeRoleCollaborator(collaborator.id, 6)">Gerente de estación</button>
                      <button mat-menu-item *ngIf="collaborator.role !== 7" (click)="changeRoleCollaborator(collaborator.id, 7)">Asistente de estación</button>
                    </mat-menu>
                  </div>
                  <div class="button">
                    <a href="mailto:{{collaborator.email}}" class="link">
                      <button matTooltip="Enviar email" mat-button>
                        <mat-icon>mail</mat-icon>
                      </button>
                    </a>
                  </div>
                  <div class="button">
                    <a href="tel:+{{collaborator.countryCode || '52'}}{{collaborator.phoneNumber}}" class="link">
                      <button matTooltip="Marcar" mat-button>
                        <mat-icon>phone</mat-icon>
                      </button>
                    </a>
                  </div>
                </div>
              </mat-card>
            </div>
          </mat-card-content>
        </ng-template>
        <ng-template #notList>
          <mat-card-content style="display: flex; justify-content: center; align-items: center; text-align: center;">
            <span>Aun no tiene collaboradores asignados a esta estación de servicio</span>
          </mat-card-content>
        </ng-template>
      </ng-template>
      <ng-template #empty>
        <mat-card-content style="display: flex; justify-content: center; align-items: center; text-align: center;">
          <span>Aun no tiene collaboradores asignados a esta estación de servicio</span>
        </mat-card-content>
      </ng-template>
    </ng-template>
    <ng-template #load>
      <mat-card-content style="display: flex; justify-content: center; align-items: center">
        <mat-spinner></mat-spinner>
      </mat-card-content>
    </ng-template>


  </mat-card>
</div>
